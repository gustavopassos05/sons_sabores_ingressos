{% extends "base.html" %}
{% block content %}
<div class="max-w-xl mx-auto bg-white rounded-2xl shadow p-6 text-center">

  <h2 class="text-2xl font-semibold mb-2">Compra registrada ✅</h2>

  <p class="text-sm text-zinc-600">
    Assim que confirmarmos o pagamento, enviaremos seus ingressos por WhatsApp ou e-mail em até <b>3 dias</b>.
  </p>

  <div class="mt-4 rounded-xl border p-4 text-left text-sm text-zinc-700 space-y-2">
    <div><span class="font-semibold">Show:</span> {{ purchase.show_name }}</div>
    <div><span class="font-semibold">Comprador:</span> {{ purchase.buyer_name }}</div>
    <div><span class="font-semibold">Status:</span>
      {% if payment and (payment.status or '')|lower == 'paid' %}
        <span class="text-green-700 font-semibold">Pagamento confirmado ✅</span>
      {% else %}
        <span class="text-yellow-700 font-semibold">Aguardando confirmação</span>
      {% endif %}
    </div>
    <div class="text-xs text-zinc-500 break-all"><span class="font-semibold">Token:</span> {{ purchase.token }}</div>
  </div>

  <p class="mt-4 text-xs text-zinc-500">
    Se você já pagou, envie o comprovante (WhatsApp ou upload na página de pagamento).
  </p>

  <div class="mt-4 grid gap-2">
    <a href="{{ url_for('purchase.pay_manual', token=purchase.token) }}"
       class="rounded-xl bg-black text-white py-3 font-medium">
      Voltar para enviar comprovante
    </a>

    <button class="rounded-xl border py-3 font-medium hover:bg-zinc-50"
            onclick="navigator.clipboard.writeText('{{ purchase.token }}'); alert('Token copiado ✅');">
      Copiar token
    </button>
  </div>

</div>
{% endblock %}
