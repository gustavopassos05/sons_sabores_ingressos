{% extends "admin_base.html" %}
{% block admin_content %}

<div class="bg-white rounded-2xl shadow p-5">
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4">
    <div>
      <h2 class="text-xl font-semibold">Reservas confirmadas</h2>
      <p class="text-sm text-zinc-500">Somente status <b>reserved</b>.</p>
    </div>

    <form method="get" class="flex gap-2">
      <input name="q" value="{{ q }}" class="w-full sm:w-80 rounded-xl border p-3 text-sm"
             placeholder="Buscar por nome, CPF, show, token…">
      <button class="rounded-xl bg-black text-white px-5 text-sm">Buscar</button>
    </form>
  </div>

  <div class="rounded-xl border divide-y">
    {% for p in rows %}
      <div class="p-4 text-sm grid grid-cols-1 md:grid-cols-5 gap-3">
        <div><b>Show:</b><br>{{ p.show_name }}</div>
        <div><b>Comprador:</b><br>{{ p.buyer_name }}</div>
        <div><b>CPF:</b><br>{{ p.buyer_cpf or "—" }}</div>
        <div><b>Telefone:</b><br>{{ p.buyer_phone or "—" }}</div>
        <div><b>Token:</b><br><span class="break-all">{{ p.token }}</span></div>
      </div>
    {% endfor %}

    {% if rows|length == 0 %}
      <div class="p-6 text-center text-zinc-500">Nenhuma reserva confirmada encontrada.</div>
    {% endif %}
  </div>
</div>

{% endblock %}
